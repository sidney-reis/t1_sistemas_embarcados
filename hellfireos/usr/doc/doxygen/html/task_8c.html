<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>HellfireOS v2.0: sys/kernel/task.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HellfireOS v2.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a408b6d3a4a484720bc3ecfeac8947e3.html">sys</a></li><li class="navelem"><a class="el" href="dir_9bdce5c9978a35427bee854c3e6e999f.html">kernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">task.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a42142901db333dad480df5a5c35dcea4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a42142901db333dad480df5a5c35dcea4">hf_id</a> (int8_t *name)</td></tr>
<tr class="memdesc:a42142901db333dad480df5a5c35dcea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a task id by its name.  <a href="#a42142901db333dad480df5a5c35dcea4"></a><br/></td></tr>
<tr class="memitem:ab77bc8efef3b3f5c6abd8c411715eca8"><td class="memItemLeft" align="right" valign="top">int8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#ab77bc8efef3b3f5c6abd8c411715eca8">hf_name</a> (uint16_t id)</td></tr>
<tr class="memdesc:ab77bc8efef3b3f5c6abd8c411715eca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a task name by its id.  <a href="#ab77bc8efef3b3f5c6abd8c411715eca8"></a><br/></td></tr>
<tr class="memitem:ac70031d8f3665ab81d28924a08ee70e9"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#ac70031d8f3665ab81d28924a08ee70e9">hf_selfid</a> (void)</td></tr>
<tr class="memdesc:ac70031d8f3665ab81d28924a08ee70e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current task id.  <a href="#ac70031d8f3665ab81d28924a08ee70e9"></a><br/></td></tr>
<tr class="memitem:a77f08c956533d6a07f02561055db7628"><td class="memItemLeft" align="right" valign="top">int8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a77f08c956533d6a07f02561055db7628">hf_selfname</a> (void)</td></tr>
<tr class="memdesc:a77f08c956533d6a07f02561055db7628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current task name.  <a href="#a77f08c956533d6a07f02561055db7628"></a><br/></td></tr>
<tr class="memitem:a216d821d031358c9916be26d08aeadb1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a216d821d031358c9916be26d08aeadb1">hf_state</a> (uint16_t id)</td></tr>
<tr class="memdesc:a216d821d031358c9916be26d08aeadb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current state of a task.  <a href="#a216d821d031358c9916be26d08aeadb1"></a><br/></td></tr>
<tr class="memitem:aa3c3c5cd358f2a6d1bedc3fe8eae01fb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#aa3c3c5cd358f2a6d1bedc3fe8eae01fb">hf_jobs</a> (uint16_t id)</td></tr>
<tr class="memdesc:aa3c3c5cd358f2a6d1bedc3fe8eae01fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of executed jobs of a task.  <a href="#aa3c3c5cd358f2a6d1bedc3fe8eae01fb"></a><br/></td></tr>
<tr class="memitem:addf6b201c03bd8385007e27ce153ce95"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#addf6b201c03bd8385007e27ce153ce95">hf_dlm</a> (uint16_t id)</td></tr>
<tr class="memdesc:addf6b201c03bd8385007e27ce153ce95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of deadline misses of a task.  <a href="#addf6b201c03bd8385007e27ce153ce95"></a><br/></td></tr>
<tr class="memitem:a6a7b70b7f5f90a419285d2afa21b8b46"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a6a7b70b7f5f90a419285d2afa21b8b46">hf_priorityset</a> (uint16_t id, uint8_t priority)</td></tr>
<tr class="memdesc:a6a7b70b7f5f90a419285d2afa21b8b46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the priority of a best effort task.  <a href="#a6a7b70b7f5f90a419285d2afa21b8b46"></a><br/></td></tr>
<tr class="memitem:af0d5e893fc4328f60b045e970c743904"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#af0d5e893fc4328f60b045e970c743904">hf_priorityget</a> (uint16_t id)</td></tr>
<tr class="memdesc:af0d5e893fc4328f60b045e970c743904"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the priority of a best effort task.  <a href="#af0d5e893fc4328f60b045e970c743904"></a><br/></td></tr>
<tr class="memitem:aaeee0c090ef6594128e992462378dc79"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#aaeee0c090ef6594128e992462378dc79">hf_spawn</a> (void(*task)(), uint16_t period, uint16_t capacity, uint16_t deadline, int8_t *name, uint32_t stack_size)</td></tr>
<tr class="memdesc:aaeee0c090ef6594128e992462378dc79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawn a new task.  <a href="#aaeee0c090ef6594128e992462378dc79"></a><br/></td></tr>
<tr class="memitem:a001531473ded340a50bf9c3405402545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a001531473ded340a50bf9c3405402545">hf_yield</a> (void)</td></tr>
<tr class="memdesc:a001531473ded340a50bf9c3405402545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yields the current task.  <a href="#a001531473ded340a50bf9c3405402545"></a><br/></td></tr>
<tr class="memitem:a140180f18def85a2264c391fa7e1215a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a140180f18def85a2264c391fa7e1215a">hf_block</a> (uint16_t id)</td></tr>
<tr class="memdesc:a140180f18def85a2264c391fa7e1215a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks a task.  <a href="#a140180f18def85a2264c391fa7e1215a"></a><br/></td></tr>
<tr class="memitem:ad1d0aa0315e89bd0a933343c809b3899"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#ad1d0aa0315e89bd0a933343c809b3899">hf_resume</a> (uint16_t id)</td></tr>
<tr class="memdesc:ad1d0aa0315e89bd0a933343c809b3899"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resumes a blocked task.  <a href="#ad1d0aa0315e89bd0a933343c809b3899"></a><br/></td></tr>
<tr class="memitem:ae369e4112ea0585309f59dc9039767f6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#ae369e4112ea0585309f59dc9039767f6">hf_kill</a> (uint16_t id)</td></tr>
<tr class="memdesc:ae369e4112ea0585309f59dc9039767f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kills a task.  <a href="#ae369e4112ea0585309f59dc9039767f6"></a><br/></td></tr>
<tr class="memitem:a10ae0383048d96d7b7e7a8567c39f0d9"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8c.html#a10ae0383048d96d7b7e7a8567c39f0d9">hf_delay</a> (uint16_t id, uint32_t delay)</td></tr>
<tr class="memdesc:a10ae0383048d96d7b7e7a8567c39f0d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delays a task for an amount of time.  <a href="#a10ae0383048d96d7b7e7a8567c39f0d9"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Sergio Johann Filho </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 2016</dd></dl>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>This source code is licensed under the GNU General Public License, Version 2. See the file 'doc/license/gpl-2.0.txt' for more details.</p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Task management primitives and auxiliary functions. </p>
</div><h2>Function Documentation</h2>
<a class="anchor" id="a140180f18def85a2264c391fa7e1215a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_block </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ERR_OK on success, ERR_INVALID_ID if the referenced task does not exist or ERR_ERROR if the task is already in the blocked state.</dd></dl>
<p>The task is marked as TASK_BLOCKED so the scheduler doesn't select it as a candidate for scheduling. The blocking state is acomplished without removing the task from the run queue, reducing the cost of the operation in cases where the task state is switched frequently (such as in semaphore primitives). </p>

</div>
</div>
<a class="anchor" id="a10ae0383048d96d7b7e7a8567c39f0d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_delay </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delays a task for an amount of time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number. </td></tr>
    <tr><td class="paramname">delay</td><td>is the amount of time (in quantum / tick units).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ERR_OK on success or ERR_INVALID_ID if the referenced task does not exist.</dd></dl>
<p>A task is removed from its run queue and its state is marked as TASK_DELAYED. The task is put on the delay queue and remains there until the dispatcher places it back to its run queue. Time is managed by the task dispatcher, which counts down delays, controls the delay queue by cycling the tasks and removing them when the task delay has passed. </p>

</div>
</div>
<a class="anchor" id="addf6b201c03bd8385007e27ce153ce95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_dlm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of deadline misses of a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>deadlines missed by the task if found and ERR_INVALID_ID otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a42142901db333dad480df5a5c35dcea4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_id </td>
          <td>(</td>
          <td class="paramtype">int8_t *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a task id by its name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is a pointer to an array holding the task name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task id if the task is found and ERR_INVALID_NAME otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="aa3c3c5cd358f2a6d1bedc3fe8eae01fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_jobs </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of executed jobs of a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>jobs executed by the task if found and ERR_INVALID_ID otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ae369e4112ea0585309f59dc9039767f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_kill </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kills a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ERR_OK on success or ERR_INVALID_ID if the referenced task does not exist.</dd></dl>
<p>All memory allocated during the task initialization is freed, the TCB entry is cleared and the task is removed from its run queue. </p>

</div>
</div>
<a class="anchor" id="ab77bc8efef3b3f5c6abd8c411715eca8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t* hf_name </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a task name by its id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task name if the task is found and NULL otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="af0d5e893fc4328f60b045e970c743904"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_priorityget </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the priority of a best effort task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task priority if the task exists and is a best effort one or ERR_INVALID_ID otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a6a7b70b7f5f90a419285d2afa21b8b46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_priorityset </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the priority of a best effort task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number. </td></tr>
    <tr><td class="paramname">priority</td><td>is the task priority ([1 .. 29] - critical, [30 .. 99] - system, [100 .. 255] - application)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ERR_OK if the task exists and is a best effort one or ERR_INVALID_ID otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ad1d0aa0315e89bd0a933343c809b3899"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_resume </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resumes a blocked task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ERR_OK on success, ERR_INVALID_ID if the referenced task does not exist or ERR_ERROR if the task is not in the blocked state.</dd></dl>
<p>The task must be in the TASK_BLOCKED state in order to be resumed. The task is marked as TASK_BLOCKED so the scheduler doesn't select it as a candidate for scheduling. The blocking state is acomplished without removing the task from the run queue, reducing the cost of the operation in cases where the task state is switched frequently (such as in semaphore primitives). </p>

</div>
</div>
<a class="anchor" id="ac70031d8f3665ab81d28924a08ee70e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t hf_selfid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current task id. </p>
<dl class="section return"><dt>Returns</dt><dd>current task id. </dd></dl>

</div>
</div>
<a class="anchor" id="a77f08c956533d6a07f02561055db7628"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t* hf_selfname </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current task name. </p>
<dl class="section return"><dt>Returns</dt><dd>current task name. </dd></dl>

</div>
</div>
<a class="anchor" id="aaeee0c090ef6594128e992462378dc79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_spawn </td>
          <td>(</td>
          <td class="paramtype">void(*)()&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>deadline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>stack_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Spawn a new task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>is a pointer to a task function / body. </td></tr>
    <tr><td class="paramname">period</td><td>is the task RT period (in quantum / tick units). </td></tr>
    <tr><td class="paramname">capacity</td><td>is the amount of work to be executed in a period (in quantum / tick units). </td></tr>
    <tr><td class="paramname">deadline</td><td>is the task deadline to complete the work in the period (in quantum / tick units). </td></tr>
    <tr><td class="paramname">name</td><td>is a string used to identify a task. </td></tr>
    <tr><td class="paramname">stack_size</td><td>is the stack memory to be allocated for the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task id if the task is created, ERR_EXCEED_MAX_NUM if the maximum number of tasks in the system is exceeded, ERR_INVALID_PARAMETER if impossible RT parameters are specified or ERR_OUT_OF_MEMORY if the system fails to allocate memory for the task resources.</dd></dl>
<p>If a task has defined realtime parameters, it is put on the RT queue, if not (period 0, capacity 0 and deadline 0), it is put on the BE queue. WARNING: Task stack size should be always configured correctly, considering data declared on the auto region (local variables) and around 1024 of spare memory for the OS. For example, if you declare a buffer of 5000 bytes, stack size should be at least 6000. </p>

</div>
</div>
<a class="anchor" id="a216d821d031358c9916be26d08aeadb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t hf_state </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current state of a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is a task id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>task state the task if found (TASK_IDLE, TASK_READY, TASK_RUNNING, TASK_BLOCKED, TASK_DELAYED or TASK_WAITING) and ERR_INVALID_ID otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a001531473ded340a50bf9c3405402545"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hf_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yields the current task. </p>
<p>The current task gives up execution and the best effort scheduler is invoked. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 23 2017 15:06:47 for HellfireOS v2.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
